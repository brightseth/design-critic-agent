<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOLIENNE - Paris Photo Critique Studio</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        :root {
            --noir: #0a0a0a;
            --gris-fonce: #1a1a1a;
            --gris: #2a2a2a;
            --gris-clair: #888;
            --blanc: #ffffff;
            --accent: #ff6b6b;
            --accent-soft: #ff6b6b20;
            --gold: #d4af37;
            --success: #4ade80;
            --warning: #fbbf24;
            --error: #f87171;
            
            --font-xs: 11px;
            --font-sm: 13px;
            --font-base: 15px;
            --font-lg: 18px;
            --font-xl: 24px;
            --font-2xl: 32px;
            --font-3xl: 48px;
            
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 20px;
            --spacing-lg: 32px;
            --spacing-xl: 48px;
            
            --radius: 8px;
            --radius-lg: 16px;
            
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 20px rgba(0,0,0,0.15);
            --shadow-lg: 0 8px 40px rgba(0,0,0,0.2);
            --shadow-glow: 0 0 40px rgba(255,107,107,0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--noir);
            color: var(--blanc);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(180deg, var(--gris-fonce) 0%, var(--noir) 100%);
            padding: var(--spacing-xl) var(--spacing-lg);
            text-align: center;
            border-bottom: 1px solid var(--gris);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, var(--accent-soft) 0%, transparent 50%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-title {
            font-size: var(--font-3xl);
            font-weight: 700;
            letter-spacing: -2px;
            margin-bottom: var(--spacing-sm);
            background: linear-gradient(135deg, var(--blanc) 0%, var(--gris-clair) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero-subtitle {
            font-size: var(--font-lg);
            color: var(--gris-clair);
            margin-bottom: var(--spacing-md);
        }

        .hero-badge {
            display: inline-block;
            background: var(--gold);
            color: var(--noir);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: var(--font-sm);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-lg);
        }

        /* Evaluation Mode Toggle */
        .mode-toggle {
            display: flex;
            justify-content: center;
            gap: var(--spacing-xs);
            margin-bottom: var(--spacing-xl);
            background: var(--gris-fonce);
            padding: 6px;
            border-radius: var(--radius-lg);
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .mode-btn {
            padding: 12px 24px;
            background: transparent;
            border: none;
            color: var(--gris-clair);
            font-size: var(--font-sm);
            font-weight: 500;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .mode-btn.active {
            background: var(--accent);
            color: var(--blanc);
            box-shadow: var(--shadow-md);
        }

        .mode-btn:not(.active):hover {
            color: var(--blanc);
        }

        /* Upload Section */
        .upload-section {
            background: var(--gris-fonce);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            position: relative;
            overflow: hidden;
            border: 2px dashed var(--gris);
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-section:hover {
            border-color: var(--accent);
            background: var(--gris);
            transform: scale(1.01);
        }

        .upload-section.dragover {
            border-color: var(--accent);
            background: var(--accent-soft);
            transform: scale(1.02);
        }

        .upload-section.has-image {
            cursor: default;
            border-style: solid;
            border-color: var(--accent);
        }

        .upload-content {
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .upload-icon {
            font-size: 64px;
            margin-bottom: var(--spacing-md);
            opacity: 0.8;
        }

        .upload-title {
            font-size: var(--font-xl);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .upload-subtitle {
            color: var(--gris-clair);
            font-size: var(--font-base);
        }

        /* Preview Section */
        .preview-section {
            display: none;
            margin-bottom: var(--spacing-xl);
        }

        .preview-section.visible {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: var(--spacing-lg);
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .preview-image-container {
            position: relative;
        }

        .preview-image {
            width: 100%;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
        }

        .image-metadata {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--gris-fonce);
            border-radius: var(--radius);
            font-size: var(--font-sm);
        }

        .metadata-item {
            display: flex;
            justify-content: space-between;
            padding: var(--spacing-xs) 0;
            border-bottom: 1px solid var(--gris);
        }

        .metadata-item:last-child {
            border-bottom: none;
        }

        .metadata-label {
            color: var(--gris-clair);
        }

        .metadata-value {
            font-weight: 500;
        }

        /* Analysis Panel */
        .analysis-panel {
            background: var(--gris-fonce);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
        }

        .analysis-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .analysis-title {
            font-size: var(--font-xl);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .analysis-status {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: 8px 16px;
            background: var(--gris);
            border-radius: 20px;
            font-size: var(--font-sm);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Paris Photo Scores */
        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .score-card {
            background: var(--gris);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .score-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent);
            transform: scaleX(var(--score-percent, 0));
            transition: transform 1s ease-out;
        }

        .score-label {
            font-size: var(--font-sm);
            color: var(--gris-clair);
            margin-bottom: var(--spacing-xs);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .score-value {
            font-size: var(--font-2xl);
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
        }

        .score-description {
            font-size: var(--font-sm);
            color: var(--gris-clair);
            line-height: 1.4;
        }

        /* Critics Section */
        .critics-section {
            margin-top: var(--spacing-xl);
        }

        .critics-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-lg);
        }

        .critics-title {
            font-size: var(--font-xl);
            font-weight: 600;
        }

        .critics-filter {
            display: flex;
            gap: var(--spacing-sm);
        }

        .filter-btn {
            padding: 8px 16px;
            background: var(--gris);
            border: 1px solid var(--gris);
            color: var(--gris-clair);
            border-radius: var(--radius);
            font-size: var(--font-sm);
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active {
            background: var(--accent);
            border-color: var(--accent);
            color: var(--blanc);
        }

        .filter-btn:hover:not(.active) {
            border-color: var(--accent);
            color: var(--blanc);
        }

        /* Critic Cards */
        .critics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: var(--spacing-lg);
        }

        .critic-card {
            background: var(--gris-fonce);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            animation: criticReveal 0.5s forwards;
            animation-delay: var(--delay, 0);
            border: 1px solid var(--gris);
            transition: all 0.3s;
        }

        @keyframes criticReveal {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .critic-card:hover {
            border-color: var(--accent);
            box-shadow: var(--shadow-glow);
            transform: translateY(-4px);
        }

        .critic-header {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .critic-avatar {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--gold));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            flex-shrink: 0;
        }

        .critic-info {
            flex: 1;
        }

        .critic-name {
            font-size: var(--font-lg);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .critic-title {
            font-size: var(--font-sm);
            color: var(--gris-clair);
            margin-bottom: 8px;
        }

        .critic-expertise {
            display: inline-block;
            background: var(--gris);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: var(--font-xs);
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .critic-score {
            position: absolute;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            background: var(--accent);
            color: var(--blanc);
            padding: 8px 16px;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: var(--font-lg);
        }

        .critic-quote {
            background: var(--noir);
            border-left: 3px solid var(--accent);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: var(--radius);
            font-style: italic;
            color: var(--gris-clair);
            position: relative;
        }

        .critic-quote::before {
            content: '"';
            position: absolute;
            top: -10px;
            left: 10px;
            font-size: 48px;
            color: var(--accent);
            opacity: 0.3;
        }

        .critic-analysis {
            margin-top: var(--spacing-md);
        }

        .analysis-section {
            margin-bottom: var(--spacing-md);
        }

        .analysis-label {
            font-size: var(--font-sm);
            font-weight: 600;
            color: var(--accent);
            margin-bottom: var(--spacing-xs);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .analysis-list {
            list-style: none;
        }

        .analysis-item {
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--gris);
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-sm);
        }

        .analysis-item:last-child {
            border-bottom: none;
        }

        .analysis-icon {
            font-size: 16px;
            margin-top: 2px;
        }

        .analysis-icon.strength { color: var(--success); }
        .analysis-icon.weakness { color: var(--warning); }
        .analysis-icon.recommendation { color: var(--accent); }

        .analysis-text {
            flex: 1;
            font-size: var(--font-sm);
            line-height: 1.5;
        }

        /* Gallery Recommendations */
        .gallery-section {
            background: linear-gradient(135deg, var(--gris-fonce), var(--noir));
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-top: var(--spacing-xl);
            border: 1px solid var(--gold);
            position: relative;
            overflow: hidden;
        }

        .gallery-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--gold), var(--accent));
        }

        .gallery-title {
            font-size: var(--font-xl);
            font-weight: 600;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
        }

        .gallery-card {
            background: var(--gris);
            border-radius: var(--radius);
            padding: var(--spacing-md);
            transition: all 0.3s;
        }

        .gallery-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .gallery-card-title {
            font-size: var(--font-base);
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
            color: var(--gold);
        }

        .gallery-card-content {
            font-size: var(--font-sm);
            color: var(--gris-clair);
            line-height: 1.5;
        }

        /* Action Buttons */
        .action-bar {
            position: fixed;
            bottom: var(--spacing-lg);
            right: var(--spacing-lg);
            display: flex;
            gap: var(--spacing-sm);
            z-index: 1000;
        }

        .action-btn {
            padding: 12px 24px;
            background: var(--accent);
            color: var(--blanc);
            border: none;
            border-radius: var(--radius);
            font-size: var(--font-base);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: var(--shadow-lg);
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .action-btn.secondary {
            background: var(--gris);
            color: var(--gris-clair);
        }

        .action-btn.secondary:hover {
            background: var(--gris-fonce);
            color: var(--blanc);
        }

        /* Loading States */
        .skeleton {
            background: linear-gradient(90deg, var(--gris) 25%, var(--gris-fonce) 50%, var(--gris) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: var(--radius);
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-text {
            height: 16px;
            margin-bottom: 8px;
        }

        .skeleton-title {
            height: 24px;
            width: 60%;
            margin-bottom: 12px;
        }

        /* Hidden input */
        input[type="file"] {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <header class="hero">
        <div class="hero-content">
            <h1 class="hero-title">SOLIENNE</h1>
            <p class="hero-subtitle">Paris Photo Exhibition Critique Studio</p>
            <span class="hero-badge">Grand Palais 2024</span>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Evaluation Mode Toggle -->
        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="gallery">Gallery Ready</button>
            <button class="mode-btn" data-mode="collector">Collector Appeal</button>
            <button class="mode-btn" data-mode="technical">Print Quality</button>
            <button class="mode-btn" data-mode="narrative">Story & Context</button>
        </div>

        <!-- Upload Section -->
        <div class="upload-section" id="uploadZone">
            <div class="upload-content">
                <div class="upload-icon">📷</div>
                <h2 class="upload-title">Drop SOLIENNE Image</h2>
                <p class="upload-subtitle">Drag & drop or click to select • Paste URL • Maximum quality for best analysis</p>
            </div>
            <input type="file" id="fileInput" accept="image/*">
        </div>

        <!-- Preview Section -->
        <div class="preview-section" id="previewSection">
            <div class="preview-image-container">
                <img id="previewImage" class="preview-image" alt="SOLIENNE work">
                <div class="image-metadata">
                    <div class="metadata-item">
                        <span class="metadata-label">Status</span>
                        <span class="metadata-value" id="metaStatus">Ready for Analysis</span>
                    </div>
                </div>
            </div>

            <div class="analysis-panel">
                <div class="analysis-header">
                    <h2 class="analysis-title">
                        <span>🎯</span>
                        Paris Photo Analysis
                    </h2>
                    <div class="analysis-status">
                        <span class="status-dot"></span>
                        <span>Analyzing...</span>
                    </div>
                </div>

                <!-- AI Vision Description -->
                <div id="aiDescription" style="display: none; margin-bottom: var(--spacing-lg); padding: var(--spacing-lg); background: linear-gradient(135deg, var(--noir), var(--gris-fonce)); border-radius: var(--radius-lg); border: 2px solid var(--gold); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--gold), var(--accent));"></div>
                    <div style="font-size: var(--font-base); color: var(--gold); margin-bottom: var(--spacing-sm); text-transform: uppercase; letter-spacing: 2px; font-weight: 600;">
                        🔍 AI Vision Analysis
                    </div>
                    <div id="aiDescriptionText" style="color: var(--blanc); line-height: 1.8; font-size: var(--font-base); font-weight: 400;"></div>
                    <div id="aiObservations" style="margin-top: var(--spacing-md); display: none;">
                        <div style="font-size: var(--font-sm); color: var(--accent); margin-bottom: var(--spacing-xs); text-transform: uppercase; letter-spacing: 1px;">Key Observations</div>
                        <ul id="aiObservationsList" style="list-style: none; padding: 0; margin: 0;"></ul>
                    </div>
                </div>

                <!-- Paris Photo Specific Scores -->
                <div class="score-grid" id="scoreGrid">
                    <!-- Scores will be dynamically added -->
                </div>
            </div>
        </div>

        <!-- Critics Section -->
        <div class="critics-section" id="criticsSection" style="display: none;">
            <div class="critics-header">
                <h2 class="critics-title">Expert Photography Critics</h2>
                <div class="critics-filter">
                    <button class="filter-btn active" data-filter="all">All Critics</button>
                    <button class="filter-btn" data-filter="masters">Masters</button>
                    <button class="filter-btn" data-filter="contemporary">Contemporary</button>
                    <button class="filter-btn" data-filter="curators">Curators</button>
                </div>
            </div>

            <div class="critics-grid" id="criticsGrid">
                <!-- Critics will be dynamically added -->
            </div>
        </div>

        <!-- Gallery Recommendations -->
        <div class="gallery-section" id="gallerySection" style="display: none;">
            <h2 class="gallery-title">
                <span>🏛️</span>
                Paris Photo Presentation Strategy
            </h2>
            <div class="gallery-grid" id="galleryGrid">
                <!-- Recommendations will be added -->
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-bar" id="actionBar" style="display: none;">
        <button class="action-btn secondary" id="exportBtn">Export Report</button>
        <button class="action-btn" id="newImageBtn">Analyze Another</button>
    </div>

    <script>
        // Photography Critics for Paris Photo
        const photographyCritics = {
            masters: [
                {
                    name: 'Andreas Gursky',
                    icon: '🏗️',
                    title: 'Large Format Master',
                    expertise: 'Scale & Spectacle',
                    category: 'masters',
                    focus: ['monumentality', 'digital manipulation', 'contemporary sublime', 'market value']
                },
                {
                    name: 'Cindy Sherman',
                    icon: '🎭',
                    title: 'Identity Explorer',
                    expertise: 'Conceptual Portraiture',
                    category: 'masters',
                    focus: ['identity', 'performance', 'cultural critique', 'self-representation']
                },
                {
                    name: 'Wolfgang Tillmans',
                    icon: '🌈',
                    title: 'Material Innovator',
                    expertise: 'Process & Politics',
                    category: 'contemporary',
                    focus: ['materiality', 'abstraction', 'social engagement', 'installation']
                }
            ],
            contemporary: [
                {
                    name: 'Tyler Mitchell',
                    icon: '🌟',
                    title: 'New Vision',
                    expertise: 'Black Utopia',
                    category: 'contemporary',
                    focus: ['representation', 'joy', 'fashion crossover', 'emerging markets']
                },
                {
                    name: 'Viviane Sassen',
                    icon: '🎨',
                    title: 'Color Theorist',
                    expertise: 'Geometric Abstraction',
                    category: 'contemporary',
                    focus: ['color', 'shadow play', 'African perspectives', 'fashion art']
                }
            ],
            curators: [
                {
                    name: 'Nina Roehrs',
                    icon: '🔗',
                    title: 'Digital Section Curator',
                    expertise: 'Blockchain & Digital Art',
                    category: 'curators',
                    focus: ['digital transformation', 'Web3 community', 'NFT authenticity', 'virtual exhibition formats']
                },
                {
                    name: 'Charlotte Cotton',
                    icon: '📚',
                    title: 'Photography Theorist',
                    expertise: 'Contemporary Discourse',
                    category: 'curators',
                    focus: ['conceptual rigor', 'market positioning', 'institutional fit', 'critical reception']
                },
                {
                    name: 'Okwui Enwezor',
                    icon: '🌍',
                    title: 'Global Perspectives',
                    expertise: 'Postcolonial Lens',
                    category: 'curators',
                    focus: ['political urgency', 'documentary ethics', 'global south', 'biennial circuit']
                }
            ]
        };

        // Paris Photo Scoring Criteria
        const scoringCriteria = {
            gallery: {
                'Visual Impact': 'First impression from 3 meters away',
                'Technical Excellence': 'Print quality and craftsmanship',
                'Conceptual Depth': 'Ideas and meaning beyond surface',
                'Market Position': 'Collector appeal and pricing potential',
                'Exhibition Readiness': 'Professional presentation standards'
            },
            collector: {
                'Investment Potential': 'Future value appreciation likelihood',
                'Uniqueness': 'Distinctive voice in current market',
                'Provenance Story': 'Artist narrative and exhibition history',
                'Edition Strategy': 'Scarcity and edition management',
                'Conservation': 'Long-term preservation considerations'
            },
            technical: {
                'Resolution': 'DPI and enlargement potential',
                'Color Accuracy': 'Gamut and calibration precision',
                'Print Medium': 'Paper/material selection appropriateness',
                'Archival Quality': 'Longevity and museum standards',
                'Presentation': 'Mounting and framing decisions'
            },
            narrative: {
                'Story Clarity': 'Narrative legibility and impact',
                'Cultural Relevance': 'Contemporary discourse engagement',
                'Emotional Resonance': 'Viewer connection and memorability',
                'Series Coherence': 'Relationship to larger body of work',
                'Artist Statement': 'Conceptual framework articulation'
            }
        };

        // State
        let currentMode = 'gallery';
        let uploadedImage = null;
        let imageMetadata = {};

        // Elements
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const previewSection = document.getElementById('previewSection');
        const previewImage = document.getElementById('previewImage');
        const scoreGrid = document.getElementById('scoreGrid');
        const criticsSection = document.getElementById('criticsSection');
        const criticsGrid = document.getElementById('criticsGrid');
        const gallerySection = document.getElementById('gallerySection');
        const actionBar = document.getElementById('actionBar');

        // Mode Toggle
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
                if (uploadedImage) {
                    updateScores();
                }
            });
        });

        // Filter Buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const filter = btn.dataset.filter;
                filterCritics(filter);
            });
        });

        function filterCritics(filter) {
            const cards = document.querySelectorAll('.critic-card');
            cards.forEach(card => {
                if (filter === 'all' || card.dataset.category === filter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Upload Handlers
        uploadZone.addEventListener('click', () => fileInput.click());
        
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });

        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });

        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) handleFile(files[0]);
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        function handleFile(file) {
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    uploadedImage = e.target.result;
                    analyzeImage(file);
                };
                reader.readAsDataURL(file);
            }
        }

        function analyzeImage(file) {
            // Update UI
            uploadZone.classList.add('has-image');
            uploadZone.innerHTML = `
                <div class="upload-content">
                    <div class="upload-icon">✓</div>
                    <h2 class="upload-title">${file.name}</h2>
                    <p class="upload-subtitle">Click to change image</p>
                </div>
            `;
            
            previewSection.classList.add('visible');
            previewImage.src = uploadedImage;
            
            // Update status
            document.getElementById('metaStatus').textContent = 'Analyzing...';
            document.getElementById('metaStatus').style.color = 'var(--gold)';
            
            // Start analysis immediately
            performAnalysis();
        }


        async function performAnalysis() {
            // Show loading states
            showLoadingScores();
            
            try {
                // Call the real API with the uploaded image
                const response = await fetch('/api/analyze-simple', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        imageData: uploadedImage,
                        mode: 'photo' // Force photography mode for Paris Photo
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API call failed: ${response.status}`);
                }
                
                const aiResult = await response.json();
                console.log('AI analysis received:', aiResult);
                
                // Progressive reveal with real data
                setTimeout(() => showAIDescription(aiResult), 300);
                setTimeout(() => updateScores(aiResult), 800);
                setTimeout(() => showCritics(aiResult), 1800);
                setTimeout(() => showGalleryRecommendations(aiResult), 2800);
                setTimeout(() => {
                    document.querySelector('.analysis-status').innerHTML = `
                        <span class="status-dot" style="background: var(--success)"></span>
                        <span>AI Analysis Complete</span>
                    `;
                    document.getElementById('metaStatus').textContent = 'AI Vision Active';
                    document.getElementById('metaStatus').style.color = 'var(--success)';
                    actionBar.style.display = 'flex';
                }, 3000);
                
            } catch (error) {
                console.error('Analysis failed:', error);
                
                // Fallback to simulated analysis
                setTimeout(() => showAIDescription(null), 300);
                setTimeout(() => updateScores(), 800);
                setTimeout(() => showCritics(), 1800);
                setTimeout(() => showGalleryRecommendations(), 2800);
                setTimeout(() => {
                    document.querySelector('.analysis-status').innerHTML = `
                        <span class="status-dot" style="background: var(--warning)"></span>
                        <span>Demo Analysis Complete</span>
                    `;
                    document.getElementById('metaStatus').textContent = 'Demo Mode';
                    document.getElementById('metaStatus').style.color = 'var(--warning)';
                    actionBar.style.display = 'flex';
                }, 3000);
            }
        }

        function showAIDescription(aiResult) {
            const aiDescDiv = document.getElementById('aiDescription');
            const aiDescText = document.getElementById('aiDescriptionText');
            const aiObsDiv = document.getElementById('aiObservations');
            const aiObsList = document.getElementById('aiObservationsList');
            
            if (aiResult && aiResult.aiPowered) {
                // This is real AI analysis
                let description = "I see ";
                
                if (aiResult.imageAnalysis && aiResult.imageAnalysis.description) {
                    description = "I see " + aiResult.imageAnalysis.description;
                } else if (aiResult.observations && aiResult.observations.length > 0) {
                    description = "I observe " + aiResult.observations[0];
                }
                
                aiDescText.innerHTML = `<strong style="color: var(--gold);">This is what I see:</strong><br>${description}`;
                
                // Show observations if available
                if (aiResult.observations && aiResult.observations.length > 1) {
                    aiObsList.innerHTML = '';
                    aiResult.observations.slice(1).forEach(obs => {
                        const li = document.createElement('li');
                        li.style.cssText = 'padding: var(--spacing-xs) 0; color: var(--gris-clair); border-bottom: 1px solid var(--gris);';
                        li.innerHTML = `<span style="color: var(--accent); margin-right: 8px;">▸</span> ${obs}`;
                        aiObsList.appendChild(li);
                    });
                    aiObsDiv.style.display = 'block';
                }
                
                aiDescDiv.style.display = 'block';
                aiDescDiv.style.animation = 'fadeIn 0.5s';
            } else {
                // Fallback demo mode
                aiDescText.innerHTML = `<strong style="color: var(--warning);">Demo Mode:</strong><br>Upload an image to see real AI vision analysis. The system will describe exactly what it sees in your photograph.`;
                aiDescDiv.style.display = 'block';
                aiDescDiv.style.borderColor = 'var(--warning)';
            }
        }

        function showLoadingScores() {
            scoreGrid.innerHTML = '';
            const criteria = scoringCriteria[currentMode];
            
            Object.entries(criteria).forEach(([label, description]) => {
                const card = document.createElement('div');
                card.className = 'score-card';
                card.innerHTML = `
                    <div class="score-label">${label}</div>
                    <div class="skeleton skeleton-text" style="width: 40%; height: 32px; margin-bottom: 8px;"></div>
                    <div class="skeleton skeleton-text" style="height: 14px;"></div>
                    <div class="skeleton skeleton-text" style="height: 14px; width: 80%;"></div>
                `;
                scoreGrid.appendChild(card);
            });
        }

        function updateScores(aiResult = null) {
            scoreGrid.innerHTML = '';
            const criteria = scoringCriteria[currentMode];
            
            Object.entries(criteria).forEach(([label, description], index) => {
                // Use AI scores if available, otherwise generate random
                let score;
                if (aiResult && aiResult.scores) {
                    const scoreKeys = Object.keys(aiResult.scores);
                    score = aiResult.scores[scoreKeys[index % scoreKeys.length]] || (70 + Math.floor(Math.random() * 25));
                } else {
                    score = 70 + Math.floor(Math.random() * 25);
                }
                
                const card = document.createElement('div');
                card.className = 'score-card';
                card.style.setProperty('--score-percent', score / 100);
                card.style.animationDelay = `${index * 0.1}s`;
                
                card.innerHTML = `
                    <div class="score-label">${label}</div>
                    <div class="score-value">${score}/100</div>
                    <div class="score-description">${description}</div>
                `;
                
                scoreGrid.appendChild(card);
            });
        }

        function showCritics(aiResult = null) {
            criticsSection.style.display = 'block';
            criticsGrid.innerHTML = '';
            
            let selectedCritics;
            
            // Use AI critics if available, otherwise use fallback
            if (aiResult && aiResult.critique && aiResult.critique.length > 0) {
                selectedCritics = aiResult.critique.slice(0, 3).map(critic => ({
                    name: critic.name,
                    icon: critic.avatar || '📷',
                    title: critic.title || 'Photography Expert',
                    expertise: critic.focus || 'Image Analysis',
                    category: 'ai',
                    aiCritic: critic // Store full AI critic data
                }));
            } else {
                // Fallback to predefined critics
                const allCritics = [
                    ...photographyCritics.masters,
                    ...photographyCritics.contemporary,
                    ...photographyCritics.curators
                ];
                selectedCritics = allCritics.slice(0, 3);
            }
            
            selectedCritics.forEach((critic, index) => {
                const score = critic.aiCritic ? critic.aiCritic.score : (70 + Math.floor(Math.random() * 20));
                const card = document.createElement('div');
                card.className = 'critic-card';
                card.dataset.category = critic.category;
                card.style.setProperty('--delay', `${index * 0.2}s`);
                
                // Use AI-generated quote or fallback
                let quote = critic.aiCritic ? 
                    (critic.aiCritic.hotTake || critic.aiCritic.acknowledgment || 'Interesting work that shows potential.') :
                    generateCriticQuote(critic);
                
                card.innerHTML = `
                    <div class="critic-score">${score}/100</div>
                    <div class="critic-header">
                        <div class="critic-avatar">${critic.icon}</div>
                        <div class="critic-info">
                            <div class="critic-name">${critic.name}</div>
                            <div class="critic-title">${critic.title}</div>
                            <span class="critic-expertise">${critic.expertise}</span>
                        </div>
                    </div>
                    
                    <div class="critic-quote">
                        ${quote}
                    </div>
                    
                    <div class="critic-analysis">
                        <div class="analysis-section">
                            <div class="analysis-label">Strengths</div>
                            <ul class="analysis-list">
                                ${generateAnalysisItems('strength', critic, aiResult).map(item => `
                                    <li class="analysis-item">
                                        <span class="analysis-icon strength">✓</span>
                                        <span class="analysis-text">${item}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div class="analysis-section">
                            <div class="analysis-label">Areas for Refinement</div>
                            <ul class="analysis-list">
                                ${generateAnalysisItems('weakness', critic, aiResult).map(item => `
                                    <li class="analysis-item">
                                        <span class="analysis-icon weakness">!</span>
                                        <span class="analysis-text">${item}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                        
                        <div class="analysis-section">
                            <div class="analysis-label">Paris Photo Recommendations</div>
                            <ul class="analysis-list">
                                ${generateAnalysisItems('recommendation', critic, aiResult).map(item => `
                                    <li class="analysis-item">
                                        <span class="analysis-icon recommendation">→</span>
                                        <span class="analysis-text">${item}</span>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                
                criticsGrid.appendChild(card);
            });
        }

        function generateCriticQuote(critic) {
            const quotes = {
                'Andreas Gursky': 'This work demonstrates an understanding of contemporary scale, but the spectacle needs more rigor.',
                'Cindy Sherman': 'I see attempts at identity exploration, but the performance feels tentative. Push the boundaries.',
                'Wolfgang Tillmans': 'The materiality is present but not fully explored. Consider the print as object, not just image.',
                'Tyler Mitchell': 'There\'s joy here, but it needs more intentionality. Black utopia requires bold vision.',
                'Viviane Sassen': 'Strong geometric instincts, but the color relationships could be more daring.',
                'Nina Roehrs': 'Consider the digital provenance and blockchain potential. How does this work exist beyond the physical print?',
                'Charlotte Cotton': 'Conceptually promising, but needs stronger positioning within contemporary discourse.',
                'Okwui Enwezor': 'The political urgency is muted. Paris Photo demands work that confronts, not suggests.'
            };
            
            return quotes[critic.name] || 'This work shows promise but needs refinement for the Paris Photo context.';
        }

        function generateAnalysisItems(type, critic, aiResult = null) {
            // Try to use AI analysis first
            if (critic.aiCritic && critic.aiCritic.points) {
                const aiPoints = critic.aiCritic.points.filter(point => 
                    (type === 'strength' && (point.type === 'strength' || point.type === 'positive')) ||
                    (type === 'weakness' && (point.type === 'weakness' || point.type === 'negative')) ||
                    (type === 'recommendation' && (point.type === 'suggestion' || point.type === 'recommendation'))
                ).map(point => point.text);
                
                if (aiPoints.length > 0) {
                    return aiPoints.slice(0, 2); // Return up to 2 AI points
                }
            }
            
            // Fallback to predefined items
            const items = {
                strength: [
                    'Strong compositional foundation with clear visual hierarchy',
                    'Technical execution meets gallery standards',
                    'Unique perspective within current photography landscape',
                    'Print quality suitable for collector market',
                    'Conceptual framework aligns with contemporary discourse'
                ],
                weakness: [
                    'Narrative could be more immediately legible',
                    'Color grading needs refinement for print reproduction',
                    'Series context not immediately apparent',
                    'Scale considerations for Grand Palais space',
                    'Artist statement needs stronger articulation'
                ],
                recommendation: [
                    'Consider larger print size (minimum 100cm) for Paris Photo impact',
                    'Develop accompanying text that positions work in broader context',
                    'Prepare edition strategy: suggest 5+2 AP for this market level',
                    'Frame with museum glass and archival materials only',
                    'Price point suggestion: €8,000-12,000 based on current market'
                ]
            };
            
            // Customize based on critic focus
            const focusedItems = items[type].filter((item, index) => 
                index < 3 || Math.random() > 0.5
            ).slice(0, 2);
            
            return focusedItems;
        }

        function showGalleryRecommendations(aiResult = null) {
            gallerySection.style.display = 'block';
            const galleryGrid = document.getElementById('galleryGrid');
            
            let recommendations = [
                {
                    title: 'Presentation Strategy',
                    content: 'Position at eye level, 150cm center. Allow 2m viewing distance. Consider spot lighting with 3000K temperature.'
                },
                {
                    title: 'Collector Talking Points',
                    content: 'Emphasize process innovation and conceptual rigor. Reference similar works in major collections.'
                },
                {
                    title: 'Press Release Focus',
                    content: 'Lead with transformation narrative. Connect to broader cultural conversations about consciousness and memory.'
                },
                {
                    title: 'Opening Strategy',
                    content: 'Schedule artist talk for Day 2. Prepare 3-minute elevator pitch. Have editions chart ready.'
                },
                {
                    title: 'Follow-up Materials',
                    content: 'Prepare PDF portfolio, price list, and conservation specs. Include installation views from previous shows.'
                },
                {
                    title: 'Networking Priorities',
                    content: 'Focus on: Pompidou curators, emerging collectors from Asia, photography book publishers.'
                }
            ];
            
            // Enhance recommendations with AI insights if available
            if (aiResult && aiResult.recommendations && aiResult.recommendations.length > 0) {
                // Replace first few recommendations with AI ones
                const aiRecs = aiResult.recommendations.slice(0, 3).map(rec => ({
                    title: rec.title || rec.category || 'AI Recommendation',
                    content: rec.description || rec.text || 'AI-generated recommendation for improvement.'
                }));
                
                recommendations = [...aiRecs, ...recommendations.slice(3)];
            }
            
            galleryGrid.innerHTML = '';
            recommendations.forEach((rec, index) => {
                const card = document.createElement('div');
                card.className = 'gallery-card';
                card.style.animationDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <div class="gallery-card-title">${rec.title}</div>
                    <div class="gallery-card-content">${rec.content}</div>
                `;
                galleryGrid.appendChild(card);
            });
        }

        // Export functionality
        document.getElementById('exportBtn')?.addEventListener('click', () => {
            // Would implement PDF export here
            console.log('Exporting Paris Photo analysis report...');
        });

        // New image
        document.getElementById('newImageBtn')?.addEventListener('click', () => {
            location.reload();
        });
    </script>
</body>
</html>